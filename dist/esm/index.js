import{useRef as r,useMemo as t,useCallback as n}from"react";import{useRouter as e}from"next/router";var o,u=function(o,u){var i=e(),a=i.asPath.split("#")[0],c=a.split("?")[0]||"",l=a.split("?")[1]||"",p=r();o=t((function(){return o}),[]);var f=t((function(){return new URLSearchParams(l)}),[l]),s=n((function(r,t){var n,e,a,l=null!==(e=null!==(n=null==t?void 0:t.mode)&&void 0!==n?n:null==u?void 0:u.mode)&&void 0!==e?e:"replace",s=null!==(a=null==t?void 0:t.shallow)&&void 0!==a?a:null==u?void 0:u.shallow,d=new URLSearchParams(f);p.current=null==t?void 0:t.trigger,Object.entries(r).forEach((function(r){var t=r[0],n=r[1];if(o[t]){var e=o[t].encode(n);null==e?d.delete(t):d.set(t,e)}}));var v=d.toString();return"replace"===l?i.replace({pathname:c,query:v},void 0,{shallow:s}):i.push({pathname:c,query:v},void 0,{shallow:s}),v}),[f]),d=t((function(){return Object.keys(o).map((function(r){return f.get(r)}))}),[f]),v=t((function(){var r=Object.entries(o).reduce((function(r,t){var n=t[0],e=t[1].decode(f.get(n));return null!=e&&(r[n]=e),r}),{}),t=p.current;return p.current=void 0,[r,t]}),d);return[v[0],s,v[1]]};!function(r){var t;!function(r){r.SIMPLE="simple",r.ARRAY="array"}(t=r.ParamType||(r.ParamType={}));var n=function(){this.is=t.SIMPLE};r.Param=n;var e=function(){this.is=t.ARRAY};r.ArrayParam=e}(o||(o={}));var i=function(r,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])},i(r,t)};function a(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=r}i(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var c=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return a(t,r),t.prototype.encode=function(r){return r||void 0},t.prototype.decode=function(r){return r},t}(o.Param),l=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return a(t,r),t.prototype.encode=function(r){return String(r)},t.prototype.decode=function(r){return Number(r)},t}(o.Param),p=function(r){function t(t){var n=r.call(this)||this;return n.param=t,n}return a(t,r),t.prototype.encode=function(r){var t=this;return r.map((function(r){return t.param.encode(r)})).filter((function(r){return void 0!==r}))},t.prototype.decode=function(r){var t=this;return r.map((function(r){return t.param.decode(r)}))},t}(o.ArrayParam);export{p as ArrayOf,o as NextQueryParams,l as NumberParam,c as StringParam,u as useParams};
