"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("react"),e=require("next/router");exports.NextQueryParams=void 0,function(r){var e;!function(r){r.SIMPLE="simple",r.ARRAY="array"}(e=r.ParamType||(r.ParamType={}));var t=function(){this.is=e.SIMPLE};r.Param=t;var n=function(){this.is=e.ARRAY};r.ArrayParam=n}(exports.NextQueryParams||(exports.NextQueryParams={}));var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])},t(r,e)};function n(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return n(e,r),e.prototype.encode=function(r){return r||void 0},e.prototype.decode=function(r){return r},e}(exports.NextQueryParams.Param),u=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return n(e,r),e.prototype.encode=function(r){return String(r)},e.prototype.decode=function(r){return Number(r)},e}(exports.NextQueryParams.Param),a=function(r){function e(e){var t=r.call(this)||this;return t.param=e,t}return n(e,r),e.prototype.encode=function(r){var e=this;return r.map((function(r){return e.param.encode(r)})).filter((function(r){return void 0!==r}))},e.prototype.decode=function(r){var e=this;return r.map((function(r){return e.param.decode(r)}))},e}(exports.NextQueryParams.ArrayParam);exports.ArrayOf=a,exports.NumberParam=u,exports.StringParam=o,exports.useParams=function(t,n){var o=e.useRouter(),u=o.asPath.split("#")[0],a=u.split("?")[0]||"",i=u.split("?")[1]||"",c=r.useRef();t=r.useMemo((function(){return t}),[]);var s=r.useMemo((function(){return new URLSearchParams(i)}),[i]),p=r.useCallback((function(r,e){var u,i,p,l=null!==(i=null!==(u=null==e?void 0:e.mode)&&void 0!==u?u:null==n?void 0:n.mode)&&void 0!==i?i:"replace",f=null!==(p=null==e?void 0:e.shallow)&&void 0!==p?p:null==n?void 0:n.shallow,d=new URLSearchParams(s);c.current=null==e?void 0:e.trigger,Object.entries(r).forEach((function(r){var e=r[0],n=r[1];if(t[e]){var o=t[e].encode(n);null==o?d.delete(e):d.set(e,o)}}));var m=d.toString();return"replace"===l?o.replace({pathname:a,query:m},void 0,{shallow:f}):o.push({pathname:a,query:m},void 0,{shallow:f}),m}),[s]),l=r.useMemo((function(){return Object.keys(t).map((function(r){return s.get(r)}))}),[s]),f=r.useMemo((function(){var r=Object.entries(t).reduce((function(r,e){var t=e[0],n=e[1].decode(s.get(t));return null!=n&&(r[t]=n),r}),{}),e=c.current;return c.current=void 0,[r,e]}),l);return[f[0],p,f[1]]};
